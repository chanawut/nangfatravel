<!DOCTYPE HTML>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport"
        content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover" />
    <title>ราคาทัวร์ลาว นางฟ้าทราเวล</title>
    <link rel="stylesheet" type="text/css" href="styles/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="styles/style.css">

    <link rel="stylesheet" type="text/css" href="fonts/css/fontawesome-all.min.css">
    <link rel="manifest" href="_manifest.json" data-pwa-version="set_in_manifest_and_pwa_js">
    <link rel="apple-touch-icon" sizes="180x180" href="app/icons/icon-192x192.png">

    <link rel="stylesheet" type="text/css" href="styles/calendar.css">
    <link rel="stylesheet" type="text/css" href="styles/slider.css">

    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@100;200;300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="styles/introjs.css">
    <link rel="stylesheet" href="styles/introjs-modern.css">
        
    <script type="text/javascript" src="scripts/date-swap-th-en-th.js"></script>
</head>

<body class="theme-light">

    <div id="preloader">
        <div class="spinner-border color-highlight" role="status"></div>
    </div>

    <div id="page">

        <div class="header header-fixed header-logo-center header-auto-show">
            <a href="index.html" class="header-title">กดปฏิทิน จองวันเดินทาง</a>
            <a href="#" data-back-button class="header-icon header-icon-1"><i class="fas fa-chevron-left"></i></a>
            <a href="#" data-menu="menu-main" class="header-icon header-icon-4"><i class="fas fa-bars"></i></a>
            <a href="#" data-toggle-theme class="header-icon header-icon-3 show-on-theme-dark"><i
                    class="fas fa-sun"></i></a>
            <a href="#" data-toggle-theme class="header-icon header-icon-3 show-on-theme-light"><i
                    class="fas fa-moon"></i></a>
        </div>

        <div id="footer-bar" class="footer-bar-3">
            <a href="index-components.html"><i class="fa fa-layer-group"></i><span>Features</span></a>
            <a href="index-pages.html" class="active-nav"><i class="fa fa-file"></i><span>Pages</span></a>
            <a href="index.html" class="circle-nav"><i class="fa fa-home"></i><span>Welcome</span></a>
            <a href="index-projects.html"><i class="fa fa-camera"></i><span>Projects</span></a>
            <a href="#" data-menu="menu-main"><i class="fa fa-bars"></i><span>Menu</span></a>
        </div>

        <div class="page-title page-title-fixed">
            <h1 class="font-22">ราคาต่อท่าน</h1>
            <!-- <a href="#" class="page-title-icon shadow-xl bg-theme color-theme" data-menu="menu-share"><i
                    class="fa fa-share-alt"></i></a> -->
            <a href="#" class="page-title-icon shadow-xl bg-theme color-theme show-on-theme-light" data-toggle-theme><i
                    class="fa fa-moon"></i></a>
            <a href="#" class="page-title-icon shadow-xl bg-theme color-theme show-on-theme-dark" data-toggle-theme><i
                    class="fa fa-lightbulb color-yellow-dark"></i></a>
            <a href="#" class="page-title-icon shadow-xl bg-theme color-theme" data-menu="menu-contact"><img
                    height="30px" class="preload-img mt-n1 opacity-80" data-src="images/nangfa-logo.png"></a>
            <!-- <a href="#" class="preload-img page-title-icon shadow-xl bg-theme color-theme" data-src="images/nangfa-logo.png" data-menu="menu-main"><div class="preload-img" 
                style="background-image: url('images/nangfa-logo.png');"></div></a> -->
            <!-- <a href="#" class="page-title-icon shadow-xl bg-theme color-theme" data-menu="menu-main"><i
                    class="fa fa-bars"></i></a> -->
        </div>
        <div class="page-title-clear"></div>

        <div class="page-content">

            <!-- /////////////////////  Content start here  //////////////////// -->


            <!--------------------------------------->
            <!--walkthrough คร่าวๆ แจ้งว่าหน้านี้ทำอะไรบ้าง-->
            <!--------------------------------------->
            <!-- <div class="content opacity-50 mt-n3">
                <div class="row font-11 mb-n1">
                    <div class="col-3 text-center pt-2 pb-0 px-1 ml-2 bg-gray-light rounded-sm color-black font-10">
                        <div><i class="fas fa-user-plus font-16"></i></div>ปุ่มเลื่อนซ้ายขวา จำนวนผู้เดินทาง
                    </div>
                    <div class="col-1 text-center mt-4"><i class="ml-auto fas fa-chevron-right"></i>
                    </div>
                    <div class="col-3 text-center pt-2 pb-0 px-1 ml-auto bg-gray-light rounded-sm color-black font-10">
                        <div><i class="fas fa-question-circle font-18"></i></div>คลิกที่ราคา เพื่อดูรายละเอียด
                    </div>
                    <div class="col-1 text-center mt-4"><i class="ml-auto fas fa-chevron-right"></i>
                    </div>
                    <div
                        class="col-3 text-center pt-2 pb-0 px-1 ml-auto mr-2 bg-gray-light rounded-sm color-black font-10">
                        <div><i class="far fa-calendar-check font-18"></i></div>คลิกปุ่มปฏิทิน ระบุวันเดินทาง
                    </div>
                </div>
            </div> -->

            <!--------------------------------------->
            <!--ส่วนของราคา เปลี่ยนไปตามจำนวนของผู้เดินทาง-->
            <!--------------------------------------->
            <div id="tourChoice_div" style="min-height: 32vh;"></div>



            <!--------------------------------------->
            <!-- ส่วนของตัวเลื่อนซ้ายขวา ปรับจำนวนผู้เดินทาง-->
            <!--------------------------------------->
            <div class="content mt-4">
                <div id="range-slider-area" class="range-slider-pax-slider mx-4 mt-n4 mb-1">
                    <span id="rs-bullet" class="rs-label-pax-slider color-highlight"></span>
                    <input id="rs-range-line" class="ios-slider" type="range" value="" min="1" max="50">
                </div>
            </div>
            <p class="mt-n4 font-12 font-500 text-center mx-2"><i class="fas fa-user-plus font-22 mr-2"></i>
                เลื่อนซ้าย <i class="fas fa-arrows-alt-h"></i> ขวาเพื่อปรับจำนวน (นับอายุตั้งแต่ 3 ปี ขึ้นไป)</p>



            <!-- /////////////////////  Script start here  //////////////////// -->


            <script>
                // ตัวแปรต้องเรียกใช้ในหลาย function 
                let tourPlan = new Object();
                let itemsku = new Object();
                let _selectedDate;

                // เมื่อเข้ามาโดยตรงที่หน้านี้  เช็คก่อนว่าหากไม่มีการระบุโปรแกรมมาก่อน ให้กลับไปหน้า index เพื่อเลือกโปรแกรมมาก่อน
                if (localStorage.getItem("nangfa-laos-program") === null) {
                    // $('#backToHomePage').toast('show');
                    alert("โปรแกรมทัวร์ยังไม่ได้ถูกเลือกค่ะ! กลับหน้าหลักเพื่อเลือกโปรแกรมเดินทาง");
                    window.location.href = "index.html";
                }

                // เมื่อกดที่เครื่องหมายคำถาม หรือ ราคา ให้แสดงหน้าใบเสนอราคา instant quotation
                function renderInstantQuotation(selectedSKU, selectedPax) {
                    console.log(`first set localStorage : 'nangfa-laos-sku' = ${selectedSKU}, 'nangfa-laos-pax', ${selectedPax}`);
                    localStorage.setItem('nangfa-laos-sku', selectedSKU);
                    localStorage.setItem('nangfa-laos-pax', selectedPax);

                    itemsku = tourPlan.filter(e => e.sku === selectedSKU);
                    let pax = parseInt(selectedPax);
                    let totalPrice = itemsku[0].price * pax;
                    let deposit = totalPrice * 0.5;
                    let balance = totalPrice - deposit;
                    let withHolding = (totalPrice * 100 / 97).toLocaleString('en-US', { maximumFractionDigits: 2 });
                    let quotationDate = new Date(Date.now()).toLocaleString('th-TH', { year: 'numeric', day: 'numeric', month: 'long', hour12: false });


                    // inject value ให้กับ ใบเสนอราคา
                    document.getElementById("tourName").textContent = itemsku[0].name;
                    document.getElementById("tourDescription").textContent = itemsku[0].description;
                    document.getElementById("tourSku").textContent = itemsku[0].sku;
                    document.getElementById("tourQuotationDate").textContent = quotationDate;
                    document.getElementById("tourPax").textContent = `${pax} ท่าน`;
                    document.getElementById("tourMeetingPoint").textContent = itemsku[0].start;
                    document.getElementById("tourSalePlanName").textContent = itemsku[0].saleplanname;
                    document.getElementById("priceDetail").textContent = `${numberWithCommas(itemsku[0].price)} x ${pax} ท่าน`;
                    document.getElementById("priceTotal").textContent = `ทั้งหมด ${numberWithCommas(totalPrice)} บาท`;
                    document.getElementById("depositAmount").textContent = `${numberWithCommas(deposit)} บาท`;
                    document.getElementById("balanceAmount").textContent = `${numberWithCommas(balance)} บาท`;
                    document.getElementById("grandTotal").textContent = `${numberWithCommas(totalPrice)} บาท`;
                    document.getElementById("withHolding").textContent = `${withHolding} บาท`;
                    document.getElementById("disCount").textContent = `${itemsku[0].promotion} จำนวน ${numberWithCommas(itemsku[0].discount)} บาท`;
                    document.getElementById("hotelNight").textContent = itemsku[0].hotel;
                    document.getElementById("mealAmount").textContent = itemsku[0].meal;
                    document.getElementById("roomAddedPrice").textContent = numberWithCommas(itemsku[0].hotel * 1100);
                    document.getElementById("requiredDoc").textContent = itemsku[0].required;


                    // check if hotel === 0
                    if (itemsku[0].hotel === 0) {
                        document.getElementById("hotel_included_li").style.display = "none"
                        document.getElementById("hotelRemark").style.display = "none"
                        document.getElementById("hotel_excluded_li").style.display = "block"
                    } else {
                        document.getElementById("hotel_included_li").style.display = "block"
                        document.getElementById("hotelRemark").style.display = "block"
                        document.getElementById("hotel_excluded_li").style.display = "none"
                    }

                    // check if meal === 0
                    if (itemsku[0].meal === 0) {
                        document.getElementById("meal_included_li").style.display = "none"
                        document.getElementById("meal_excluded_li").style.display = "block"
                    } else {
                        document.getElementById("meal_included_li").style.display = "block"
                        document.getElementById("meal_excluded_li").style.display = "none"
                    }

                    // check if guide === 0
                    if (itemsku[0].guide === 0) {
                        document.getElementById("guide_included_li").style.display = "none"
                        document.getElementById("guide_excluded_li").style.display = "block"
                    } else {
                        document.getElementById("guide_included_li").style.display = "block"
                        document.getElementById("guide_excluded_li").style.display = "none"
                    }

                    // เมื่อ inject เสร็จแล้ว ค่อยแสดง instant page 
                    $('#quotationInstantPage').showMenu();
                }

                // เมื่อมีการกดลิงค์เรียกดูใบเสนอราคาอีกครั้ง (กดจากหน้า #invoice)
                function checkQuotationAgain() {
                    renderInstantQuotation(localStorage.getItem('nangfa-laos-sku'), localStorage.getItem('nangfa-laos-pax'));
                }

                // เมื่อมีการกดจองจากหน้า instant quotation ให้ user ทำการเลือกวันเดินทางอีกครั้ง
                function bookFromQuotationPage() {
                    // ส่ง user ไปเลือกวันเดินทางก่อนทุกกรณี
                    console.log(`ส่ง user ไปเลือกวันเดินทางก่อน`);
                    $('#quotationInstantPage').hideMenu();
                    showActionSheetCalendar(localStorage.getItem('nangfa-laos-sku'), localStorage.getItem('nangfa-laos-pax'));
                    $('#actionSheetCalendar').showMenu();

                }

                // เมื่อมีการกดเปลี่ยนวันเดินทางจากหน้า #invoice ให้ user ทำการเลือกวันเดินทางอีกครั้ง
                function bookFromInvoicePage() {
                    // ส่ง user ไปเลือกวันเดินทางก่อนทุกกรณี
                    console.log(`เปลี่ยนวันเดินทาง`);
                    $('#invoice').hideMenu();
                    showActionSheetCalendar(localStorage.getItem('nangfa-laos-sku'), localStorage.getItem('nangfa-laos-pax'));
                    $('#actionSheetCalendar').showMenu();

                }

                // เมื่อกดปุ่มปฏิทินเพื่อเลือกวันเดินทาง (กดจากหน้าหลัก range slider)
                function showActionSheetCalendar(selectedSKU, selectedPax) {
                    console.log(`again! set localStorage : 'nangfa-laos-sku' = ${selectedSKU}, 'nangfa-laos-pax', ${selectedPax}`);
                    localStorage.setItem('nangfa-laos-sku', selectedSKU);
                    localStorage.setItem('nangfa-laos-pax', selectedPax);

                    console.log("filter หา itemsku อีกครั้ง เผื่อลูกค้ากดที่ปุ่มจองก่อน โดยไม่กดเข้าใบเสนอราคา");
                    itemsku = tourPlan.filter(e => e.sku === selectedSKU);


                    // fire this calendar first for INLINE mode
                    $(function () {
                        $("#datepicker").datepicker({
                            dateFormat: "dd-M-yy",
                            prevText: "<", nextText: ">", currentText: "วันนี้", monthNames: ["มกราคม", "กุมภาพันธ์", "มีนาคม", "เมษายน", "พฤษภาคม", "มิถุนายน", "กรกฎาคม", "สิงหาคม", "กันยายน", "ตุลาคม", "พฤศจิกายน", "ธันวาคม"], monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], dayNamesMin: ["อา", "จ", "อ", "พ", "พฤ", "ศ", "ส"], weekHeader: "Wk", firstDay: 0,
                            minDate: 0,
                            hideIfNoPrevNext: true, duration: '',
                            onSelect: function () {
                                _selectedDate = $(this).val();
                            }
                        });
                    });

                    $('#actionSheetCalendar').showMenu();

                }

                // เมื่อกดปุ่ม ตกลง ในปฏิทิน หลังเลือกวันเดินทางแล้ว  ให้แสดงช่องทางการจอง (แสด menu #invoice)
                function createInvoice() {
                    // หากกดตกลงเลย(ไม่กดเลือกวันที่)  จะกำหนดค่า วันนี้ ให้อัตโนมัติ 
                    _selectedDate = (_selectedDate === undefined) ? changeEnDateFormat(new Date()) : _selectedDate
                    localStorage.setItem('nangfa-laos-tripstart', _selectedDate);
                    localStorage.setItem('nangfa-laos-tripstart-th', get_th_date(_selectedDate));
                    console.log(`set localStorage : 'nangfa-laos-tripstart' = ${_selectedDate} , 'nangfa-laos-tripstart-th' = ${get_th_date(_selectedDate)}`);
                    $('#actionSheetCalendar').hideMenu();

                    // เก็บ code [sku + tripstart + pax] ไว้ก่อนทุกครั้งที่มีการตกลงเลือกวันที่เดินทาง
                    localStorage.setItem('nangfa-laos-bookthiscode', itemsku[0].sku + "&" + localStorage.getItem('nangfa-laos-tripstart') + "&" + localStorage.getItem('nangfa-laos-pax'));

                    // สร้างหมายเลข invoice [หมายเลข 6 หลัก ตัวอย่าง 345630] ไว้ reference
                    localStorage.setItem('nangfa-laos-invoice-id', `${Math.floor(Math.random() * (999999 - 100000 + 1) + 100000)}`);

                    // element ของ #invoice
                    document.getElementById("finalTourName").textContent = itemsku[0].name;
                    document.getElementById("finalPickup").innerHTML = `<i class="fas fa-street-view mr-1"></i>รับส่งที่ ${itemsku[0].start} <i class="far fa-calendar-check mr-1 ml-2"></i>เดินทาง ${localStorage.getItem('nangfa-laos-tripstart-th')}`;
                    document.getElementById("finalPax").textContent = `${localStorage.getItem('nangfa-laos-pax')} ท่าน`;
                    document.getElementById("finalPlan").textContent = itemsku[0].saleplanname;
                    document.getElementById("tourCode").textContent = itemsku[0].tourcode;
                    document.getElementById("finalPricePerPax").textContent = `ท่านละ ${numberWithCommas(itemsku[0].price)} บาท`;
                    document.getElementById("finalPriceTotal").textContent = `รวม ${numberWithCommas(itemsku[0].price * parseInt(localStorage.getItem('nangfa-laos-pax')))} บาท`;
                    document.getElementById("finalDiscount").innerHTML = `รับส่วนลดอีก ${numberWithCommas(itemsku[0].discount)} บาท`;

                    // element ของ #lineBookingThankYouPage
                    document.getElementById("invoiceCode").innerHTML = localStorage.getItem('nangfa-laos-invoice-id');
                    document.getElementById("invoiceCode_telPage").innerHTML = localStorage.getItem('nangfa-laos-invoice-id');

                    // element ของ #telBookingThankYouPage
                    document.getElementById("telProgram").innerHTML = itemsku[0].tourcode;
                    document.getElementById("telStartDate").innerHTML = localStorage.getItem('nangfa-laos-tripstart-th');
                    document.getElementById("telStartTrip").innerHTML = itemsku[0].start;
                    document.getElementById("telPax").innerHTML = localStorage.getItem('nangfa-laos-pax');
                    document.getElementById("telPlanName").innerHTML = itemsku[0].saleplanname;
                    document.getElementById("telDiscount").innerHTML = numberWithCommas(itemsku[0].discount);


                    $('#invoice').showMenu();
                }



                // 1.)  เร่ิม fetch ราคามา แล้วใช้ tourCode, pickup เป็นตัวกรองเอา sku ที่เกี่ยวข้องมาเท่านั้น
                fetch(LA_P_MODEL)
                    .then(res => res.json())
                    .then(data => {
                        // 1) ดูก่อนว่าลูกค้าเลือก "โปรแกรม" และ "จุดรับส่ง" ไหน (จากหน้า index)
                        const _program = localStorage.getItem('nangfa-laos-program');//"VT101";
                        const _pickup = localStorage.getItem('nangfa-laos-pickup')//"NN";

                        // fuction adjustPaxAmount ไว้เช็คค่า pax สำหรับเอาไป filter หาจำนวนแผนการเดินทาง
                        let adjustPaxAmount = (pax) => (pax >= 13 && pax < 26) ? 13
                            : (pax >= 26 && pax < 35) ? 26
                                : pax >= 35 ? 35
                                    : pax;

                        // 2) ใช้ "โปรแกรม" และ "จุดรับส่ง" filter หาจำนวน sku ที่มีก่อน
                        const skuList = data.filter(e => e.tourcode === _program && e.tripcode === _pickup && e.status === 'active');
                        console.log(`โปรแกรม ${_program}-${_pickup} มีจำนวน : ${Object.keys(skuList).length} sku`);

                        // 3) เร่ิม render range slider elements เพื่อให้ลูกค้าเลือกจำนวนผู้เดินทางได้เอง
                        var rangeSlider = document.getElementById("rs-range-line");
                        var rangeBullet = document.getElementById("rs-bullet");
                        // let _pax = 10; // เริ่มแรกระบบเลือกผู้เดินทางเริ่มต้นให้ก่อนที่ 10 ท่าน  
                        let _pax = (localStorage.getItem('nangfa-laos-pax') === null) ? 10 : localStorage.getItem('nangfa-laos-pax');
                        rangeSlider.value = _pax // set range value
                        rangeBullet.textContent = _pax // set bullet label
                        rangeBullet.style.left = _pax * 2 + "%";  // set label position
                        renderTourChoice(_pax) // จากนั้นนำ pax ที่ได้ ส่งไปหาราคา และแสดงกล่องราคาให้ลูกค้าเลือก
                        document.getElementById("planLinkNo-1").addEventListener("load", startWebTour()); // จากนั้น intro user walkthrough (ทำครั้งเดียว)


                        // Function : render ส่วนของแสดงราคา ปุ่มจอง และปุ่มใบเสนอราคา
                        function renderTourChoice(p) {
                            // a) รับค่า pax มา filter -> จะได้จำนวนแผนการเดินทางมา
                            tourPlan = skuList.filter(e => e.pax === parseInt(adjustPaxAmount(p)));
                            // console.log(`เดินทาง ${p} ท่าน มีราคาให้เลือก : ${Object.keys(tourPlan).length} แบบ ดังนี้`);

                            // b) แสดงรูปแบบราคาที่มีให้ลูกค้าเลือก
                            const tourChoice_div = document.getElementById("tourChoice_div");
                            let content = `<div class="content mt-3 mx-4"><div class="row mb-0">`;

                            let cardNo = 0;
                            tourPlan.forEach(e => {
                                // loop the price
                                cardNo += 1;
                                content = content + `
                                <div class="col-6 px-1">
                                    <div class="card card-style mx-0 mb-2 p-2 rounded-sm bg-yellow-light shadow-xxl">
                                        <h6 id="planLinkNo-${cardNo}" class="font-13 color-black"><a href="#"  onclick="renderInstantQuotation('${e.sku}', '${rangeSlider.value}');return false;"><i class="font-16 fas fa-question-circle color-blue-dark mr-1"></i> ${e.saleplanname}</a></h6>
                                        <p class="text-right font-11 mr-0 py-0 mb-1 mt-n1 color-black opacity-60"> จากปกติ <i class="font-10 fas fa-tags"></i> <s>${numberWithCommas(e.maxprice)}</s>.-</p>
                                        <div class="row mb-0">
                                            <div class="col-8 px-1">
                                                <h3 id="priceLinkNo-${cardNo}" class="text-center font-800 color-red-dark rounded-xs shadow-xl border border-highlight mb-0 ml-2 py-1">
                                                    <a href="#"  onclick="renderInstantQuotation('${e.sku}', '${rangeSlider.value}');return false;">${numberWithCommas(e.price)} .-</a></h3>
                                            </div>
                                            <div id="bookingLinkNo-${cardNo}" class="col-4 ml-auto">
                                                <a href="#"  onclick="showActionSheetCalendar('${e.sku}', '${rangeSlider.value}');return false;" class="btn btn-3d btn-xs btn-half mx-n2 rounded-xs text-uppercase font-10 font-900 shadow-xl border-red-dark bg-red-light"><i class="far fa-calendar-check scale-icon font-18"></i></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                `
                            });

                            content = content + `</div></div>`;
                            // ส่งไป render
                            tourChoice_div.innerHTML = content;
                        }

                        // 4) เมื่อลูกค้าเลือกจำนวนผู้เดินทางเอง โดยการเลืื่อน slider
                        rangeSlider.addEventListener("input", showPricebySliderValue, false);

                        function showPricebySliderValue() {
                            rangeBullet.innerHTML = rangeSlider.value;
                            var bulletPosition = (rangeSlider.value / rangeSlider.max);
                            rangeBullet.style.left = (bulletPosition * 98) + "%";

                            renderTourChoice(rangeSlider.value)
                        }
                    })
                    .catch(e => {
                        // TBD template
                        alert(`ขออภัย!! ระบบไม่สามารถเข้าถึงข้อมูลได้ในตอนนี้ค่ะ error: ${e.message}`);
                    });

            </script>
        </div>
        <!-- Page-content ends here -->






        <!-- -------------------------------------------------
        menu : quotationInstantPage
        descripton : แสดงเงื่อนไขทัวร์ รวม ไม่รวม การคืนเงิน
        when : แสดงเมื่อมีการกดที่ป้ายราคาในหน้า pric-per-pax.html
        
        call to action : 
        onclick="bookFromQuotationPage()" : ส่ง user ไปเลือกวันเดินทาง
        ------------------------------------------------- -->
        <div id="quotationInstantPage" class="menu menu-box-bottom menu-box-bottom-full rounded-0"
            data-menu-height="100%" style="overflow-x: hidden!important">

            <div class="card rounded-0 bg-2" data-card-height="380">
                <div class="card-top pt-4 pl-3 pr-3">
                    <a href="#" class="float-right icon icon-s rounded-l bg-theme color-theme ml-2 show-on-theme-light"
                        data-toggle-theme><i class="fa fa-moon"></i></a>
                    <a href="#" class="float-right icon icon-s rounded-l bg-theme color-theme ml-2 show-on-theme-dark"
                        data-toggle-theme><i class="fa fa-lightbulb color-yellow-dark"></i></a>
                    <a href="#" class="float-right close-menu icon icon-s rounded-l bg-theme color-theme scale-box"><i
                            class="fa fa-arrow-down color-red-dark"></i></a>
                </div>
                <div class="card-bottom pl-3 pr-3 mb-5 pb-4">
                    <h1 id="tourName" class="color-white font-30">${e.name}</h1>
                    <p id="tourDescription" class="color-white opacity-50">
                        ${e.description}
                    </p>
                </div>
                <div class="card-overlay bg-gradient"></div>
            </div>

            <div class="card card-style card-full-right" style="margin-top:-100px; margin-bottom:-80px; z-index:1">
                <div class="content">

                    <div class="d-flex">
                        <div class="mt-1">
                            <p class="color-highlight font-600 mb-n1">นางฟ้าทราเวล</p>
                            <p class="color-highlight font-12 font-600 mb-n1">ใบอนุญาตนำเที่ยว 51/00835</p>
                            <p class="color-highlight font-10 font-600 mb-n1">ที่อยู่ 594 หมู่ 4 ต.ในเมือง อ.เมือง
                                จ.หนองคาย 43000</p>
                            <p class="color-theme font-12 font-400 mb-n1"><a href="tel:0868616550"
                                    class="bg-blue-light px-1 py-0 rounded-xs"><i class="fas fa-mobile-alt"> </i> โทร
                                    086-8616550</a> <a href="https://line.me/R/ti/p/%40nangfatravel"
                                    class="bg-blue-light px-1 py-0 rounded-xs"><i class="fab fa-line"> </i> ไลน์
                                    @nangfatravel</a></p>
                            <h1 class="mt-2">ใบเสนอราคา <i class="far fa-file-alt"></i></h1>
                        </div>
                        <div class="ml-auto">
                            <img src="images/pictures/34s.jpg" width="60" class="rounded-xl">
                        </div>
                    </div>

                    <div class="row mb-0 mt-0">
                        <h5 class="col-3 text-left font-12 opacity-80">รหัส</h5>
                        <h5 id="tourSku" class="col-9 text-right font-12 opacity-60 font-400">${e.sku}</h5>

                        <h5 class="col-3 text-left font-12 opacity-80">วันที่เสนอ</h5>
                        <h5 id="tourQuotationDate" class="col-9 text-right font-12 opacity-60 font-400">John Doe</h5>
                    </div>
                    <div class="divider"></div>

                    <div class="row mb-0 mt-0">
                        <h5 class="col-4 opacity-70 text-left font-15">เดินทาง</h5>
                        <h5 id="tourPax" class="col-8 color-theme text-right font-14 font-400">${e.pax} ท่าน</h5>

                        <h5 class="col-3 opacity-70 text-left font-15">รับส่งที่</h5>
                        <h5 id="tourMeetingPoint" class="col-9 color-theme text-right font-14 font-400">${e.start}</h5>

                        <h5 class="col-5 opacity-70 text-left font-15">แผนการเดินทาง</h5>
                        <h5 id="tourSalePlanName" class="col-7 color-theme text-right font-14 font-400">
                            ${e.saleplanname}</h5>
                    </div>

                    <div class="divider"></div>

                    <div class="mb-3 bg-gray-light px-4 py-3 rounded-s">
                        <h3 class="font-500">ค่าใช้จ่าย</h3>
                        <div class="pl-3 w-100">
                            <p id="priceDetail" class="text-right mb-0 color-highlight">${numberWithCommas(e.price)}.- x
                                ${e.pax} ท่าน
                            </p>
                            <h4 id="priceTotal" class="text-right">ทั้งหมด ${numberWithCommas(e.price * e.pax)} บาท
                            </h4>
                        </div>

                    </div>

                    <div class="divider mt-4"></div>

                    <div class="d-flex mb-3 px-2">
                        <div>
                            <h5 class="opacity-70 font-500">จองโดยชำระมัดจำ</h5>
                            <h5 class="opacity-50 font-12 font-500 mt-n2">ก่อนเดินทางอย่างน้อย 14 วัน</h5>
                        </div>
                        <div class="ml-auto">
                            <h5 id="depositAmount">${numberWithCommas(e.price * e.pax * 0.5)} บาท</h5>
                        </div>
                    </div>
                    <div class="d-flex mb-3 px-2">
                        <div>
                            <h5 class="opacity-70 font-500">ชำระที่เหลือ</h5>
                            <h5 class="opacity-50 font-12 font-500 mt-n2">ในวันเดินทาง ก่อนเข้าลาว</h5>
                        </div>
                        <div class="ml-auto">
                            <h5 id="balanceAmount">${numberWithCommas(e.price * e.pax * 0.5)} บาท</h5>
                        </div>
                    </div>
                    <div class="d-flex mb-3 px-2">
                        <div>
                            <h3 class="font-700">รวมชำระทั้งหมด</h3>
                        </div>
                        <div class="ml-auto">
                            <h3 id="grandTotal">${numberWithCommas(e.price * e.pax * 0.5)} บาท</h3>
                        </div>
                    </div>
                    <p class="font-center font-11 font-400 opacity-80 mt-n3 px-2">(กรณีออกใบหัก ณ ที่จ่าย 3% ราคารวมคือ
                        <span id="withHolding">${numberWithCommas(e.price * e.pax * 100 / 97)}</span> บาท)
                    </p>

                    <div class="divider"></div>

                    <div class="text-center scale-box">
                        <a href="#" onclick="bookFromQuotationPage(); return false;"
                            class="btn btn-3d btn-xs btn-half mx-n2 rounded-xs text-uppercase font-20 font-900 shadow-xl border-red-dark bg-red-light">
                            คลิก เลือกวันเดินทาง <i class="ml-1 far fa-calendar-check font-20"></i></a>
                    </div>

                    <div class="divider mt-4"></div>

                    <div class="mb-3 mt-4">
                        <h4 class="text-center font-14 font-500 "><i
                                class="fas fa-gift mr-1 font-20 color-yellow-dark"></i>พิเศษ!
                            เลือกวันเดินทาง และ จองทางไลน์ รับ : <br>
                            <span id="disCount"
                                class="text-right font-18 font-600 color-black bg-yellow-dark badge">${e.promotion}
                                ${e.discount} บาท</span>
                        </h4>
                    </div>
                </div>
            </div>

            <div class="card rounded-0 bg-1" data-card-height="300">
                <div class="card-center">
                    <a href="tel:0868616550" class="color-white font-italic font-800 font-40 ml-4">086-8616550</a>
                    <p class="color-white text-center mb-0 mt-1">"คลิกที่เบอร์โทร สอบถามได้เลยนะคะ"</p>
                </div>
                <div class="card-overlay bg-gradient"></div>
            </div>

            <div class="card card-style card-full-left" style="margin-top:-100px; z-index:1">
                <div class="content">
                    <p class="font-600 color-highlight mb-n1">แผนการเดินทาง</p>
                    <h1 class="mb-n3">รวม</h1>
                    <div class="row mb-0 mt-n2">
                        <div class="col-6">
                            <ul class="icon-list font-500 color-theme font-13 mt-4 line-height-l">
                                <li><i class="fas fa-road mr-2 color-blue-dark"></i> ค่าด่านไทยลาว</li>
                                <li><i class="fas fa-gas-pump mr-2 color-blue-dark"></i> รถส่วนตัวรวมน้ำมัน</li>
                                <li><i class="fas fa-user-tie mr-2 color-blue-dark"></i> พร้อมคนขับนำเที่ยว</li>
                                <li><i class="fas fa-user-shield mr-2 color-blue-dark"></i> ประกันอุบัติเหตุ</li>
                            </ul>
                        </div>
                        <div class="col-6">
                            <ul class="icon-list font-500 color-theme font-13 mt-4 line-height-
                                   l">
                                <li><i class="fas fa-camera mr-2 color-blue-dark"></i> ค่าเข้าชมที่ระบุ</li>
                                <li id="hotel_included_li"><i class="fas fa-bed mr-2 color-blue-dark"></i> ที่พัก
                                    <span id="hotelNight"></span> คืน<sup>[1]</sup>
                                </li>
                                <li id="meal_included_li"><i class="fas fa-utensils mr-2 color-blue-dark"></i> อาหาร
                                    <span id="mealAmount"></span> มื้อ
                                </li>
                                <li id="guide_included_li"><i class="fas fa-microphone-alt mr-2 color-blue-dark"></i>
                                    ไกด์บรรยายไทย</li>
                            </ul>
                        </div>
                        <p id="hotelRemark" class="font-13 font-400 mx-3 mt-n1"><sup>[1]</sup> ที่พัก 3 ดาว นอน 2
                            ท่าน/ห้อง
                            พักเดี่ยวเพิ่ม <span id="roomAddedPrice">${numberWithCommas(e.hotel * 1100)}</span> บาท</p>
                    </div>

                    <div class="divider"></div>

                    <h1 class="mb-n3">ไม่รวม</h1>
                    <div class="row mb-0 mt-n2">
                        <div class="col-6">
                            <ul class="icon-list font-500 color-theme font-13 mt-4 line-height-l">
                                <li><i class="fas opacity-40 fa-parachute-box mr-2"></i> ค่าเข้าชมที่ไม่ได้ระบุ</li>
                                <li><i class="fas opacity-40 fa-passport mr-2"></i> วีซ่าผู้ที่ไม่ใช่คนไทย</li>
                                <li><i class="fas opacity-40 fa-balance-scale mr-2"></i> ค่าปรับของต้องภาษี</li>
                                <li><i class="fas opacity-40 fa-paw mr-2"></i> สัตว์เลี้ยง</li>
                                <li><i class="fas opacity-40 fa-wifi mr-2"></i> ค่าโทร, อินเตอร์เน็ท</li>
                                <li id="hotel_excluded_li"><i class="fas opacity-40 fa-bed mr-2"></i> ที่พัก</li>
                                <li id="guide_excluded_li"><i class="fas opacity-40 fa-microphone-alt-slash mr-2"></i>
                                    ไกด์บรรยาย</li>
                            </ul>
                        </div>
                        <div class="col-6">
                            <ul class="icon-list font-500 color-theme font-13 mt-4 line-height-
                                   l">
                                <li><i class="fas opacity-40 fa-beer mr-2"></i> ค่าอาหารที่สั่งเพิ่ม</li>
                                <li><i class="fas opacity-40 fa-cocktail mr-2"></i> มินิบาร์ที่โรงแรม</li>
                                <li><i class="fas opacity-40 fa-key mr-2"></i> ห้องจัดเลี้ยงส่วนตัว</li>
                                <li><i class="fas opacity-40 fa-briefcase-medical mr-2"></i> ประกันสุขภาพ</li>
                                <li><i class="fas opacity-40 fa-ticket-alt mr-2"></i> ตั๋วเครื่องบิน รถไฟ</li>
                                <li id="meal_excluded_li"><i class="fas opacity-40 fa-utensils mr-2"></i> อาหาร</li>
                            </ul>
                        </div>
                    </div>

                    <div class="divider"></div>

                    <h1 class="mb-n3">ไม่ต้องจ่ายเพิ่ม</h1>
                    <div class="row mb-0 mt-n2">
                        <div class="col-6">
                            <ul class="icon-list font-500 color-theme font-13 mt-4 line-height-l">
                                <li><i class="fas opacity-40 fa-gift mr-2"></i> ค่าทิปไกด์</li>
                                <li><i class="fas opacity-40 fa-gift mr-2"></i> ค่าทิปหัวหน้าทัวร์</li>
                            </ul>
                        </div>
                        <div class="col-6">
                            <ul class="icon-list font-500 color-theme font-13 mt-4 line-height-
                                   l">
                                <li><i class="fas opacity-40 fa-gift mr-2"></i> ค่าทิปคนขับ</li>
                            </ul>
                        </div>
                        <h5 class="font-12 font-400 color-red-dark py-n2 mx-3 mt-n1 opacity-70"><i
                                class="fas fa-heart mr-2"></i>นางฟ้าไม่บังคับเก็บค่าทิปเพิ่มเติมนะคะ
                            ลูกค้าประทับใจในบริการ และต้องการให้ทิปคนขับ, ไกด์,
                            หรือหัวหน้าทัวร์เป็นการส่วนตัวในภายหลังได้ค่ะ</h5>
                    </div>
                </div>
            </div>

            <div class="card rounded-0 bg-1" data-card-height="50">

            </div>

            <div class="card card-style card-full-left" style="margin-top:-100px; z-index:1">
                <div class="content">
                    <p class="font-600 color-highlight mb-n1">เงื่อนไข</p>
                    <h1 class="mb-n3">เอกสารที่ใช้</h1>
                    <div class="row mb-0 mt-n2">
                        <div class="col-12">
                            <ul class="icon-list font-500 color-theme font-13 mt-4 line-height-l">
                                <li><i class="fas fa-address-card mr-2"></i> <span id="requiredDoc">${e.required}</span>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="divider"></div>

                    <h1 class="mb-n3">การชำระเงิน</h1>
                    <div class="row mb-0 mt-n2">
                        <div class="col-12">
                            <ul class="icon-list font-500 color-theme font-13 mt-3 line-height-l">
                                ทัวร์แบ่งรับชำระเป็น 2 งวด ค่ะ
                                <li><i class="mr-1"></i>
                                    งวดที่ 1: ลูกค้าชำระมัดจำ สำหรับยืนยันจองการเดินทาง</li>
                                <li><i class="mr-1"></i>
                                    งวดที่ 2: ลูกค้าชำระส่วนที่เหลือ ในวันเดินทาง หรือก่อนเดินทางอย่างน้อย 3 วัน</li>
                            </ul>
                        </div>
                    </div>

                    <div class="divider"></div>

                    <h1 class="mb-n3">การแจ้งเอกสาร</h1>
                    <div class="row mb-0 mt-n2">
                        <div class="col-12">
                            <ul class="icon-list font-500 color-theme font-13 mt-3 line-height-l">
                                แจ้งล่วงหน้า อย่างน้อย 7-14 วัน ทางไลน์ @nangfatravel
                                <li><i class="fas opacity-40 fa-info-circle ml-2"></i>
                                    เพื่อให้ทัวร์ตรวจสอบอายุของเอกสาร เราช่วยแจ้งลูกค้าให้ทราบล่วงหน้า
                                    เผื่อเวลาหากต้องทำเอกสารใหม่ค่ะ</li>
                                <li><i class="fas opacity-40 fa-info-circle ml-2"></i>
                                    เพื่อให้ทัวร์ตรวจสอบหากผู้เดินทางไม่ใช่คนไทย กรณีต้องทำวีซ่า หรือทำ re-entry
                                    ก่อนออกไทยค่ะ
                                </li>
                            </ul>
                        </div>
                    </div>


                    <div class="divider"></div>

                    <h1 class="mb-n3">การคืนเงิน</h1>
                    <div class="row mb-0 mt-n2">
                        <div class="col-12">
                            <ul class="icon-list font-500 color-theme font-13 mt-4 line-height-l">
                                <li><i class="fas opacity-40 fa-circle mr-1"></i>
                                    ลดจำนวนผู้เดินทาง หรือ เปลี่ยนแปลงวันเดินทาง หรือ ยกเลิกการเดินทางก่อนกำหนดอย่างน้อย
                                    30 วัน
                                    ทัวร์คืนเงินค่ามัดจำให้ทั้งหมดนะคะ (ยกเว้นสำรองเดินทางวันหยุดเทศกาล,หยุดนักขัตฤกษ์,
                                    หยุดจากประกาศรัฐบาล
                                    ทัวร์ขอสงวนสิทธิ์การคืนเงินมัดจำโดยไม่มีเงื่อนไขนะคะ)</li>
                                <li><i class="fas opacity-40 fa-circle mr-1"></i>
                                    ลดจำนวนผู้เดินทาง หรือ เปลี่ยนแปลงวันเดินทาง หรือ ยกเลิกการเดินทาง 15-29 วัน
                                    ก่อนการเดินทาง
                                    ทัวร์คืนเงินค่ามัดจำ 50% (ยกเว้นสำรองเดินทางวันหยุดเทศกาล,หยุดนักขัตฤกษ์,
                                    หยุดจากประกาศรัฐบาล
                                    ทัวร์ขอสงวนสิทธิ์การคืนเงินมัดจำโดยไม่มีเงื่อนไขนะคะ)</li>
                                <li><i class="fas opacity-40 fa-circle mr-1"></i>
                                    ลดจำนวนผู้เดินทาง หรือ เปลี่ยนแปลงวันเดินทาง หรือ ยกเลิกการเดินทางภายใน 14 วัน
                                    ก่อนกำหนดเดินทาง
                                    ทัวร์ขอสงวนสิทธิ์การคืนเงินมัดจำ และทัวร์ขออนุญาตเก็บเงินส่วนที่เหลือเต็มจำนวนนะคะ
                                </li>
                                <li><i class="fas opacity-40 fa-circle mr-1"></i>
                                    ระหว่างเดินทาง หากลูกค้างดเว้นเข้าชม งดเว้นอาหาร
                                    หรืองดเว้นเข้าที่พักที่ระบุในโปรแกรม
                                    ทัวร์ขอสงวนสิทธิ์ในการคืนเงินโดยไม่มีเงื่อนไขนะคะ</li>
                                <li><i class="fas opacity-40 fa-circle mr-1"></i>
                                    กรณีลูกค้ามีเหตุสุดวิสัย ณ วันเดินทาง อาทิเช่น เจ็บป่วย, เที่ยวบินยกเลิก,
                                    ลืมหรือไม่มีพาสปอร์ต หรือพาสปอร์ตอายุไม่ถึง 6 เดือน(กรณีต้องใช้พาสปอร์ตเดินทาง),
                                    วีซ่าขาดกรณีไม่ใช่คนไทย
                                    หรือถูกปฏิเสธในการเข้าออกประเทศ
                                    ไม่สามารถเดินทางได้ ทัวร์ขอสงวนสิทธิ์ในการเก็บเงินส่วนที่เหลือเต็มจำนวนนะคะ </li>
                                <li><i class="fas opacity-40 fa-circle mr-1"></i>
                                    หากมีการระงับการเดินทางกระทันหัน อันเนื่องจาก ภัยธรรมชาติ เหตุความวุ่นวายทางการเมือง
                                    จลาจล ประท้วง
                                    ด่านปิด ภัยจากโรคระบาด หรือประกาศฉุกเฉินจากรัฐบาล
                                    ทัวร์ขอสงวนสิทธิ์การคืนเงินมัดจำและเลื่อนกำหนดการเดินทาง รอจนกว่าสถานการณ์ปกติ
                                    โดยลูกค้าแจ้งวันเดินทางให้ทราบอีกครั้งนะคะ </li>
                            </ul>
                        </div>
                    </div>

                    <div class="divider"></div>

                    <h1 class="mb-n3">เงื่อนไขทัวร์</h1>
                    <div class="row mb-0 mt-n2">
                        <div class="col-12">
                            <ul class="icon-list font-500 color-theme font-13 mt-4 line-height-l">
                                <li><i class="fas opacity-40 fa-info-circle mr-1"></i>
                                    ทัวร์ขอสงวนสิทธิ์ในการเปลี่ยนแปลงโปรแกรมทัวร์ในกรณีที่เกิดเหตุสุดวิสัย
                                    โดยคำนึงถึงความปลอดภัยของลูกค้าเป็นสำคัญ โดยไม่ต้องแจ้งให้ทราบล่วงหน้า</li>
                                <li><i class="fas opacity-40 fa-info-circle mr-1"></i>
                                    เอกสารผู้เดินทางแจ้งทางไลน์ให้ทัวร์ทราบล่วงหน้าอย่างน้อย 7-14 วัน
                                    เพื่อประโยชน์ต่อผู้เดินทางนะคะ ทัวร์ช่วยตรวจสอบเรื่องอายุเอกสาร
                                    หรือหากต้องทำวีซ่าเพิ่มในกรณีที่ไม่ใช่คนไทยค่ะ</li>
                                <li><i class="fas opacity-40 fa-info-circle mr-1"></i>
                                    กรณีลูกค้ามีกำหนดการบิน
                                    ขอให้แจ้งตั๋วสายการบินให้ทัวร์ให้ทราบล่วงหน้าก่อนกำหนดเดินทางนะคะ
                                    เพื่อให้ทัวร์จัดการเผื่อเวลาสำหรับเดินทางไปสนามบินและเวลาเช็คอินค่ะ
                                    (โดยปกติถึงสนามบินก่อนเวลาเดินทางอย่างน้อย 2 ชั่วโมง)</li>
                                <li><i class="fas opacity-40 fa-info-circle mr-1"></i>
                                    ทัวร์ขอปฏิเสธความรับผิดชอบอันเนื่องมาจาก สายการบินล่าช้าหรือยกเลิก
                                    ลูกค้าตกเครื่องขาไปหรือขากลับ สภาวะฉุกเฉินจากโรคประจำตัว สิ่งของ,ทรัพย์สิน
                                    หรือเอกสารเดินทางสูญหายหรือชำรุดในระหว่างการเดินทาง
                                    หรือผู้เดินทางถูกปฏิเสธในการเข้าและออกประเทศไม่ว่ากรณีใดๆ</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="text-center mb-4 scale-box">
                <a href="#" onclick="bookFromQuotationPage(); return false;"
                    class="btn btn-3d btn-xs btn-half mx-n2 rounded-xs text-uppercase font-20 font-900 shadow-xl border-red-dark bg-red-light">
                    คลิก เลือกวันเดินทาง <i class="ml-1 far fa-calendar-check font-16"></i></a>
            </div>
            <div class="d-flex text-right mb-4">
                <a href="#" class="ml-3 close-menu icon icon-s rounded-l bg-theme color-theme scale-box"><i
                        class="fa fa-arrow-down color-red-dark"></i></a><span class="mt-2 ml-2 opacity-60"> กลับหน้าหลัก
                </span>
            </div>
        </div>


        <!-- -------------------------------------------------
        menu : actionSheetCalendar
        descripton : ลูกค้าตัดสินใจเลือกวันเดินทางแล้ว ให้ปรากฏเมนูปฏิทินเพื่อเลือกวันเดินทาง
        when : กดปุ่มปฏิทินที่หน้า price-per-pax.html / หรือ กดปุ่มเลือกวันเดินทางจากเมนู quotationInstantPage
        
         call to action  
        onclick="createInvoice()" : เก็บ finalCode[sku, date, pax ที่ลูกค้าได้เลือกมา] ลง localStorage และสร้างหมายเลข invoice   
                                    จากนั้นส่ง user ไปยังเมนู invoice 
        ------------------------------------------------- -->
        <div id="actionSheetCalendar" class="menu menu-box-modal rounded-m bg-theme" data-menu-width="350"
            data-menu-height="520">
            <div class="menu-title mb-n1 mt-n1">
                <a href="#" class="close-menu mt-n5 mr-n1"><i class="fa fa-times-circle"></i></a>
                <h2 class="ml-3 mt-4 mb-n2 font-400 color-highlight">เลือกวันที่เดินทาง &nbsp;<i
                        class="font-20 far fa-calendar-check"></i></h2>
                <p class="text-left font-13 font-300 color-theme opacity-70">(ระบุคร่าวๆ
                    แล้วยืนยันภายหลังได้นะคะ)
                </p>
            </div>
            <div class="content mt-0 flex-container-column">
                <div>
                    <div id="datepicker" class="calendar font-20"></div>
                </div>
                <div style="height: 365px;"></div>
                <div class="content mt-4" style="align-items: flex-end;">
                    <a href="#" onclick="createInvoice();return false;"
                        class="btn btn-full gradient-blue font-20 btn-s font-400 mt-1 rounded-xs">ตกลง</a>
                </div>
            </div>
        </div>


        <!-- -------------------------------------------------
        menu : invoice
        descripton : สรุปสิ่งที่ลูกค้าได้เลือกมา (โปรแกรมอะไร รับส่งที่ไหน เดินทางวันที่เท่าไหร่ จำนวนกี่ท่าน ท่านละกี่บาท รวมทั้งคณะกี่บาท)
        when : แสดงหลังตกลงเลือกวันที่ที่ต้องการเดินทางในเมนู actionSheetCalendar

         Listener
        lineBookingButton : call lineBooking(); เพื่อเปิดเมนูสรุปการจองโดยไลน์
        telBookingButton : call telBooking(); เพื่อเปิดเมนูสรุปการจองโดยการโทร
        callbackBookingButton : call actionSheetInputUserInfo(); เพื่อให้ user กรอกข้อมูล
        
         call to action  
        onclick="checkQuotationAgain()" : ส่ง user กลับไปดูเงื่อนไขทัวร์อีกครั้ง (ไปที่ menu : quotationInstantPage)
        onclick="bookFromInvoicePage()" : ส่ง user ไปเลือกวันเดินทางอีกครั้ง (ไปที่ menu : actionSheetCalendar)
        class="close-menu" : ปิดเมนูนี้ และกลับไปหน้าป้ายราคาอีกครั้งเพื่อเลือกจำนวนผู้เดินทางใหม่
        ------------------------------------------------- -->
        <div id="invoice" class="menu menu-box-modal menu-box-detached" data-menu-width="101vw" data-menu-height="101vh"
            data-menu-effect="menu-over">

            <div class="card bg-17 mb-0" data-card-height="101vh">
                <div class="card-center ml-1 mr-1">
                    <div class="card card-style bg-11 mt-1" data-card-height="130">
                        <div class="card-bottom pl-3 pb-2">
                            <h1 id="finalTourName" class="font-14 color-white mb-n3">At a Glance</h1>
                            <h4 id="finalPickup" class="font-11 color-white mb-3 opacity-80">Latest Statistics</h4>
                            <div class="d-flex">
                                <div class="pr-2">
                                    <h5 class="color-white font-14"><i class="fas fa-user"></i></h5>
                                    <h6 id="tourCode" class="color-white opacity-60 font-12">แผน</h6>
                                </div>
                                <div class="pr-3">
                                    <h5 id="finalPax" class="color-white font-14">14k</h5>
                                    <h6 id="finalPlan" class="color-white opacity-60 font-12">Sales</h6>
                                </div>
                                <div class="ml-auto text-right pr-3">
                                    <h5 id="finalPricePerPax" class="color-white font-14">$15.315</h5>
                                    <h6 id="finalPriceTotal" class="color-white opacity-60 font-14">Total Earnings</h6>
                                </div>
                            </div>
                        </div>
                        <div class="card-overlay bg-black opacity-80"></div>
                    </div>

                    <a href="#" class="card card-style bg-1" data-card-height="90">
                        <div class="card-center pl-3">
                            <h1 class="color-white mb-n1 font-30 mt-4">จองทางไลน์</h1>
                            <p id="finalDiscount" class="badge bg-yellow-dark color-black font-18 font-800 pb-1">
                                รับส่วนลดเพิ่ม</p>
                        </div>
                        <div class="card-center">
                            <span class="icon icon-s float-right bg-theme color-black mr-3 rounded-xl"><i
                                    id="lineBookingButton" class="fa fa-arrow-right scale-box"></i></span>
                        </div>
                        <div class="card-overlay bg-black opacity-60"></div>
                    </a>

                    <a href="#" class="card card-style bg-1" data-card-height="90">
                        <div class="card-center pl-3">
                            <h1 class="color-white mb-n1 font-30 mt-2">โทรจอง</h1>
                            <p class="color-white opacity-50 mb-0">086-861-6550</p>
                        </div>
                        <div class="card-center">
                            <span class="icon icon-s float-right bg-theme color-black mr-3 rounded-xl"><i
                                    id="telBookingButton" class="fa fa-arrow-right scale-box"></i></span>
                        </div>
                        <div class="card-overlay bg-black opacity-60"></div>
                    </a>

                    <a href="#" class="card card-style bg-1" data-card-height="90">
                        <div class="card-center pl-3">
                            <h1 class="color-white mb-n1 font-30 mt-1">ให้ทัวร์ติดต่อกลับ</h1>
                            <p class="color-white opacity-50 mb-0">แจ้งชื่อ และ เบอร์ติดต่อ</p>
                        </div>
                        <div class="card-center">
                            <span class="icon icon-s float-right bg-theme color-black mr-3 rounded-xl"><i
                                    id="callbackBookingButton" class="fa fa-arrow-right scale-box"></i></span>
                        </div>
                        <div class="card-overlay bg-black opacity-60"></div>
                    </a>


                    <div class="d-flex font-11 mt-n3">
                        <a href="#" data-menu="quotationInstantPage" onclick="checkQuotationAgain();return false;">
                            <i class="ml-3 font-14 far fa-file-alt gradient-red color-white mr-0 px-1 py-1 rounded-xs"><span
                                    class="ml-1 font-11">ดูใบเสนอราคา</span></i>
                        </a>
                        <a href="#" onclick="bookFromInvoicePage(); return false;">
                            <i
                                class="ml-2 font-14 far fa-calendar-check gradient-red color-white mr-0 px-1 py-1 rounded-xs"><span
                                    class="ml-1 font-11">แก้ไขวันเดินทาง</span></i>
                        </a>
                        <a href="#" class="close-menu">
                            <i class="ml-2 font-12 fas fa-user-plus gradient-red color-white mr-0 px-1 py-1 rounded-xs"><span
                                    class="ml-1 font-11">แก้ไขผู้เดินทาง</span></i>
                        </a>
                    </div>

                </div>
                <div class="card-overlay bg-black opacity-90"></div>

            </div>
        </div>


        <!-- -------------------------------------------------
        menu : lineBookingThankYouPage
        descripton : copy รหัสจองให้ user อัตโนมัติ และ ส่งต่อไปยังหน้าไลน์ (delay 20 s)
        when : หลังกดปุ่ม จองทางไลน์ ที่เมนู invoice

         call to action  
        btn : กดส่งไลน์ตอนนี้
        ส่งลูกค้าไปยังไลน์เลย ไม่ต้องรอหมด delay
        ------------------------------------------------- -->
        <div id="lineBookingThankYouPage" class="menu menu-box-modal menu-box-detached" data-menu-width="101vw"
            data-menu-height="101vh" data-menu-effect="menu-over">
            <div class="card bg-17 mb-0" data-card-height="101vh">
                <div class="card-center ml-2 mr-2">
                    <div class="text-center">
                        <img src="images/lineBooking.svg" width="50%" class="text-center">
                    </div>

                    <div class="text-center">
                        <p class="mb-2 color-white font-22">แจ้งรหัสนี้กับแอดมินนะคะ
                        </p>
                        <p id="invoiceCode"
                            class="py-2 bg-yellow-dark color-black font-28 font-800 text-shadow-l boxed-text-s border-s rounded-m">
                            รับส่วนลดเพิ่ม</p>
                        <p id="copyStatus" class="mb-4 opacity-80 font-300">..รหัสกำลังถูกคัดลอก
                            <br>
                        </p>
                    </div>
                    <div class="text-center"><a href="https://line.me/R/ti/p/%40nangfatravel"
                            class="btn btn-xs btn-half mx-n2 rounded-s font-20 shadow-xl border-black bg-line color-white text-shadow-l">
                            แอดไลน์ ส่งรหัส รับส่วนลด <i class="ml-1 fab fa-line font-20 scale-icon"></i></a></div>
                    <p class="font-14 text-center color-white mt-4 opacity-70 font-300">
                        ..กำลังนำท่านเข้าสู่ไลน์นางฟ้าทราเวล<br>(อัตโนมัติใน
                        <span id="countdownline"></span> s)
                    </p>

                </div>
                <div class="card-overlay bg-black opacity-90"></div>
            </div>
        </div>


        <!-- -------------------------------------------------
        menu : telBookingThankYouPage
        descripton : แสดงข้อมูลสรุปให้ลูกค้า ก่อนกดโทรออกหาแอดมิน
        when : หลังกดปุ่ม โทรจอง ที่เมนู invoice

         call to action  
        btn : กดโทรตอนนี้
        btn : หรือจองทางไลน์ ได้ส่วนลด (ย้อนกลับไปที่ เมนู lineBookingThankYouPage)
        ------------------------------------------------- -->
        <div id="telBookingThankYouPage" class="menu menu-box-modal menu-box-detached" data-menu-width="101vw"
            data-menu-height="101vh" data-menu-effect="menu-over">
            <div class="card bg-17 mb-0" data-card-height="101vh">
                <div class="card-center ml-2 mr-2">
                    <div class="row font-11 mb-2 mx-1 mr-2 opacity-70">
                        <div class="col-3 text-center py-2 pb-0 px-1 ml-2 bg-gray-light rounded-sm color-black font-10">
                            <div class="badge bg-red-dark rounded-l font-12 px-2 py-1 pb-0 mb-1 opacity-60">โปรแกรม
                            </div>
                            <br><span id="telProgram" class="font-14">VT101</span>
                        </div>
                        <div
                            class="col-8 text-center py-2 pb-0 px-1 ml-auto bg-gray-light rounded-sm color-black font-10">
                            <div class="badge bg-red-dark rounded-l font-12 px-2 py-1 pb-0 mb-1 opacity-60">แผน</div>
                            <br><span id="telPlanName" class="font-14">รวมที่พัก+อาหาร+ไกด์</span>
                        </div>
                    </div>
                    <div class="row font-11 mb-2 mx-1 mr-2 opacity-70">
                        <div
                            class="col-3 text-center py-2 pb-0 px-1 ml-auto mr-2 bg-gray-light rounded-sm color-black font-10">
                            <div class="badge bg-red-dark rounded-l font-12 px-2 py-1 pb-0 mb-1 opacity-60">จำนวน</div>
                            <br><span id="telPax" class="font-14">10</span> ท่าน
                        </div>
                        <div
                            class="col-8 text-left py-2 pb-0 px-1 ml-auto bg-gray-light rounded-sm color-black font-10">
                            <div class="badge bg-red-dark rounded-l font-12 px-2 py-1 pb-0 mb-1 opacity-60">เดินทาง
                            </div>
                            <span id="telStartDate" class="ml-2 font-14">24 ธันวาคม 2564</span>
                            <br>
                            <div class="badge bg-red-dark rounded-l font-12 px-2 py-1 pb-0 mb-1 opacity-60">รับส่ง</div>
                            <span id="telStartTrip" class="ml-2 font-12">หนองคาย หรือ สนามบินอุดร</span>
                        </div>
                    </div>
                    <div class="text-center">
                        <img src="images/telBooking.svg" width="30%" class="text-center">

                        <p class="mb-3 color-white font-22">แจ้งรหัสนี้กับแอดมินนะคะ
                        </p>
                        <p id="invoiceCode_telPage"
                            class="py-2 bg-yellow-dark color-black font-28 font-800 text-shadow-l boxed-text-s border-s rounded-m">
                            รับส่วนลดเพิ่ม</p>
                    </div>
                    <div class="text-center mt-5"><a href="tel:0868616550"
                            class="btn btn-3d btn-xs btn-half mx-n2 rounded-xs font-16 font-900 shadow-xl border-red-dark bg-red-light">
                            <i class="mr-2 fas fa-phone rotate-90 font-16"></i>กดโทรตอนนี้ 086-8616550 </a></div>
                    <div class="text-center mt-2"><a href="#"
                            onclick="lineBooking('#telBookingThankYouPage'); return false;"
                            class="font-14 shadow-xl border-black bg-line color-white text-shadow-l py-1 px-2 rounded-xs">
                            <i class="mr-2 fas fa-gift font-16 scale-icon"></i>รับส่วนลดอีก <span
                                id="telDiscount"></span> บาท เมื่อจองทางไลน์ (คลิก) </a></div>

                </div>
                <div class="card-overlay bg-black opacity-90"></div>
            </div>
        </div>


        <!-- -------------------------------------------------
        menu : actionSheetInputUserInfo
        descripton : ขอทราบ ชื่อ เบอร์ติดต่อลูกค้า
        when : หลังกดปุ่ม ให้ทัวร์ติดต่อกลับ ที่เมนู invoice

         call to action  
        btn : ตกลง (ส่ง user ไปหน้า Thankyou!)
        ------------------------------------------------- -->
        <div id="actionSheetInputUserInfo" class="menu menu-box-bottom rounded-m" data-menu-height="290"
            data-menu-effect="menu-over">
            <div class="card card-style mt-3">
                <div class="content">
                    <h5 class="font-14">ให้เราติดต่อกลับ <span href="#" class="color-gray-dark">
                            ระบุชื่อ เบอร์โทร ด่านล่างได้เลยนะคะ</span>
                    </h5>
                    <div class="divider mb-2"></div>

                    <div class="input-style has-icon input-style-1 input-required">
                        <i class="input-icon fa fa-user color-highlight font-14"></i>
                        <span>ชื่อเล่น หรือ ชื่อจริง ภาษาไทยหรืออังกฤษได้ค่ะ</span>
                        <em>(ต้องการ)</em>
                        <input type="nameTH" placeholder=" ใส่ชื่อ" id="usernameInputTH">
                    </div>
                    <div class="input-style has-icon input-style-1 input-required">
                        <i class="input-icon fas fa-mobile-alt font-16 color-highlight"></i>
                        <span>ระบุตัวเลข 9 หรือ 10 หลักเท่านั้น (ไม่ใส่ - หรือ เว้นว่าง)</span>
                        <em>(ต้องการ)</em>
                        <input type="telTH" placeholder=" ใส่เบอร์ติดต่อกลับ" id="telInputTH">
                    </div>
                </div>
            </div>

            <a href="#" onclick="validateContactInput(); return false;" class="float-right scale-box mt-n2 mr-3"><span
                    class="badge font-18 gradient-highlight color-white py-2 rounded-s px-2">ตกลง<i
                        class="fa fa-arrow-right ml-1"></i></span></a>


        </div>







        <!-- --------------------------
        modal: #invoice 
        event: click -> addEventListener
        button: lineBookingButton
        -------------------------- -->
        <script>
            const _lineBookingButton = document.getElementById('lineBookingButton');
            _lineBookingButton.addEventListener("click", () => {
                lineBooking("#invoice");
            }, false)

            const _telBookingButton = document.getElementById('telBookingButton');
            _telBookingButton.addEventListener("click", () => {
                telBooking("#invoice");
            }, false)


            const _callbackBookingButton = document.getElementById('callbackBookingButton');
            _callbackBookingButton.addEventListener("click", () => {
                callbackBooking("#invoice");
            }, false)
        </script>


        <!------------------------->
        <!-- เมื่อมีการกดปุ่ม  --------->
        <!-- @nangfatravel ------------>
        <!---ที่หน้า invoice ------------>
        <script>
            function lineBooking(closeThis) {
                $(closeThis).hideMenu();
                $('#lineBookingThankYouPage').showMenu();
                // ระบบคัดลอกรหัสจองให้อีกครั้ง เผื่อลูกค้าไม่กดคัดลอกเอง
                navigator.clipboard.writeText(`${localStorage.getItem('nangfa-laos-invoice-id')}`).then(function () {
                    /* clipboard successfully set */
                    console.log(`คัดลอกแล้ว : ${localStorage.getItem('nangfa-laos-invoice-id')}`)

                    setTimeout(function () {
                        document.getElementById("copyStatus").innerHTML = `<span class="color-white"><i class="fas fa-check-circle mr-1 scale-icon"></i>รหัสถูกคัดลอกแล้ว (อัตโนมัติ)</span>`
                    }, 3000);
                }, function () {
                    /* clipboard write failed */
                    document.getElementById("copyStatus").innerHTML = "คัดลอกไม่สำเร็จ!! รุ่นของบราวเซอร์ไม่สนับสนุน กรุณาคัดลอกโค้ดโดยตรงนะคะ"
                });

                // timer สำหรับ redirect ไปยังไลน์
                var timeleft = 10;
                document.getElementById("countdownline").innerHTML = timeleft + 1;
                var downloadTimer = setInterval(function () {
                    if (timeleft <= 0) {
                        clearInterval(downloadTimer);
                        document.getElementById("countdownline").innerHTML = "0";
                        window.location = 'https://line.me/R/ti/p/%40nangfatravel';
                    } else {
                        document.getElementById("countdownline").innerHTML = timeleft;
                    }
                    timeleft -= 1;
                }, 1000);
            }
        </script>



        <!------------------------->
        <!-- เมื่อมีการกดปุ่ม  --------->
        <!-- โทรจอง ------------>
        <!---ที่หน้า invoice ------------>
        <script>
            function telBooking(closeThis) {
                $(closeThis).hideMenu();
                $('#telBookingThankYouPage').showMenu();
            }
        </script>


        <!------------------------->
        <!-- เมื่อมีการกดปุ่ม  --------->
        <!-- ให้ทัวร์ติดต่อกลับ ------------>
        <!---ที่หน้า invoice ------------>
        <script>
            function callbackBooking(closeThis) {
                $(closeThis).hideMenu();
                $('#actionSheetInputUserInfo').showMenu();
            }
        </script>


        <!------------------------->
        <!-- เมื่อมีการกดปุ่ม ส่งข้อมูล --->
        <!-- เพื่อให้ติดต่อกลับ --------->
        <!------------------------->
        <script>
            // มื่อกดปุ่ม ส่งข้อมูล ที่หน้า invoice
            const _usernameInputTH = document.getElementById('usernameInputTH');
            const _telInputTH = document.getElementById('telInputTH');
            // ทำการ validate input
            function validateContactInput() {
                // 1. ตรวจสอบชื่อ
                if (_usernameInputTH.value.replaceAll(" ", "") === "") {
                    _usernameInputTH.value = "กรุณาระบุชื่อผู้ติดต่อ!!"
                    setTimeout(function () { _usernameInputTH.value = "" }, 3000);
                    return false;
                } else {
                    let _nameValidator = /[ก-๙A-Za-z]{2}[ก-๙A-Za-z]*[ ]?[ก-๙A-Za-z]*/;
                    if (_nameValidator.test(_usernameInputTH.value) === false) {
                        _usernameInputTH.value = "กรุณาระบุเป็นภาษาไทย หรือ อังกฤษ"
                        setTimeout(function () { _usernameInputTH.value = "" }, 3000);
                        return false;
                    }
                }

                // 2. ตรวจสอบเบอร์โทร
                if (_telInputTH.value.replaceAll(" ", "").replaceAll("-", "") === "") {
                    _telInputTH.value = "กรุณาระบุเบอร์ติดต่อ!!"
                    setTimeout(function () { _telInputTH.value = "" }, 3000);
                    return false;
                } else {
                    let _telValidator = /^0[1-9][0-9]{7,8}$/;
                    if (_telValidator.test(_telInputTH.value) === false) {
                        _telInputTH.value = "รูปแบบเบอร์โทรไม่ถูกต้อง"
                        setTimeout(function () { _telInputTH.value = "" }, 3000);
                        return false;
                    }
                }

                // ถ้าผ่านทั้ง 2 เงื่อนไข
                localStorage.setItem('nangfa-laos-contact-name', _usernameInputTH.value);
                localStorage.setItem('nangfa-laos-contact-tel', _telInputTH.value);
                localStorage.setItem('nangfa-laos-booking-channel', 'ติดต่อกลับ');
                // log รายการ invoice 

                // ปิดหน้า invoice 

                // ส่ง user ไป sheet Thank you

                // $('#invoice').hideMenu();
                console.log("ส่งข้อมูลเรียบร้อย (ให้ติดต่อกลับ)");
            }
        </script>


        <!-- Contact Menu-->
        <div id="menu-contact" class="menu menu-box-bottom rounded-m" data-menu-load="menu-contact.html"
            data-menu-height="75vh" style="overflow-x: hidden!important"></div>

        <!-- Main Menu-->
        <div id="menu-main" class="menu menu-box-left rounded-0" data-menu-load="menu-main.html" data-menu-width="280"
            data-menu-active="nav-pages"></div>

        <!-- Share Menu-->
        <div id="menu-share" class="menu menu-box-bottom rounded-m" data-menu-load="menu-share.html"
            data-menu-height="370"></div>

        <!-- Colors Menu-->
        <div id="menu-colors" class="menu menu-box-bottom rounded-m" data-menu-load="menu-colors.html"
            data-menu-height="480"></div>
    </div>

    <script type="text/javascript" src="scripts/jquery.js"></script>
    <script type="text/javascript" src="scripts/bootstrap.min.js"></script>
    <script type="text/javascript" src="scripts/custom.js"></script>
    <script type="text/javascript" src="scripts/1.12.1-jquery-ui.min.js"></script>

    <script src="scripts/intro.js"></script>
    <script>

        let displayWebTour = true;
        function startWebTour() {
            if (!displayWebTour) { return false; }
            introJs().setOptions({
                steps: [
                    {
                        element: document.querySelector('#bookingLinkNo-1'),
                        title: '<h1 class="color-white">จองทัวร์</h1>',
                        intro: '<h2 class="color-gray-light">คลิก เพื่อจองวันเดินทาง</h2>',
                        position: 'auto'
                    },
                    {
                        element: document.querySelector('#planLinkNo-1'),
                        intro: 'Tooltip has position right',
                        position: 'top'
                    },
                    {
                        element: document.querySelector('#priceLinkNo-1'),
                        intro: 'Tooltip has position bottom',
                        position: 'top'
                    },
                    {
                        element: document.querySelector('#rs-range-line'),
                        intro: 'Tooltip has position top',
                        position: 'top'
                    }]
            }).start();
            displayWebTour = false;
            
        }
    </script>
</body>